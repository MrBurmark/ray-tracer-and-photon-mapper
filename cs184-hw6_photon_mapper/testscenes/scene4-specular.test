# Test Scene 3
# Intended to show transforms
# I know it's not the most exciting of scenes...

size 1920 1200 
output scene4-specular.bmp

camera 0 -4 4 0 -1 0 0 1 1 45

maxthreads 7

maxdepth 5
maxinternaldepth 3

increment 0.01

numphotons 200000000
photonradius 0.015
photondepth 2
numdiffuse 1

MSAA 16 4

//point 1 1 3  1 1 1

reclight 1 1 1  1 1 3  0 0.01 0  0.01 0 0

ambient 0 0 0
shininess 25
emission 0 0 0

alpha 1
index 1

maxverts 8

vertex -1 -1 -1
vertex +1 -1 -1 
vertex +1 +1 -1 
vertex -1 +1 -1 
vertex -1 -1 +1
vertex +1 -1 +1 
vertex +1 +1 +1
vertex -1 +1 +1

pushTransform
# The basic camera transform to return to for new parts

# The actual cube definition.  Since no instancing is supported, I will just 
# repeat this to create many cubes.  For extra credit, you can implement 
# instancing to make this simpler.  Alternatively, define a ray-cube 
# intersection test.

specular .6 .6 .5
diffuse .7 .7 1
scale 2 1 .25
par 0 1 4
par 1 2 5
par 4 5 7
par 0 4 3
par 7 6 3
par 0 3 1

popTransform
pushTransform 
# This idiom restores the camera transform and pushes it back on the stack
# Now, I draw the 4 legs of the table.
# Note that like OpenGL, commands right-multiply

specular .6 .6 .4
diffuse .7 .7 .4

translate -1.75 -0.8 -0.25 
translate 0 0 -2.0 
scale 0.15 0.15 2.0 
par 0 1 4
par 1 2 5
par 4 5 7
par 0 4 3
par 7 6 3
par 0 3 1

# leg 2: Note that I'm only changing a single translation command.

popTransform
pushTransform 
translate 1.75 -0.8 -0.25
translate 0 0 -2.0 
scale 0.15 0.15 2.0 
par 0 1 4
par 1 2 5
par 4 5 7
par 0 4 3
par 7 6 3
par 0 3 1

# leg 3: Note that I'm only changing a single translation command.

popTransform
pushTransform 
translate 1.75 0.8 -0.25
translate 0 0 -2.0 
scale 0.15 0.15 2.0 
par 0 1 4
par 1 2 5
par 4 5 7
par 0 4 3
par 7 6 3
par 0 3 1

# leg 4: Note that I'm only changing a single translation command.

popTransform
pushTransform 
translate -1.75 0.8 -0.25
translate 0 0 -2.0 
scale 0.15 0.15 2.0 
par 0 1 4
par 1 2 5
par 4 5 7
par 0 4 3
par 7 6 3
par 0 3 1


# Now draw the spheres

index 1.3
alpha 0

diffuse 0 1 0 
specular 0 0.7 0 
popTransform
pushTransform 
translate  0 0 0.5
rotate 0 0 1 45
scale 1.0 0.25 0.25 
sphere 0 0 0 1

diffuse 1 0 0
specular 0.7 0 0
popTransform
pushTransform 
translate  0 0 0.5
rotate 0 0 1 -45
scale 1.0 0.25 0.25 
sphere 0 0 0 1

diffuse 0 1 1 
specular 0 0.7 0.7
popTransform
pushTransform
translate -1.5 -.8 0.65
scale 0.4 0.4 0.4
sphere 0 0 0 1

diffuse 0 1 1 
specular 0 0.7 0.7
popTransform
pushTransform
translate 1.5 -.8 0.65
scale 0.4 0.4 0.4
sphere 0 0 0 1

diffuse 0 1 1 
specular 0 0.7 0.7
popTransform
pushTransform
translate 1.5 .8 0.65
scale 0.4 0.4 0.4
sphere 0 0 0 1

diffuse 0 1 1 
specular 0 0.7 0.7
popTransform
pushTransform
translate -1.5 .8 0.65
scale 0.4 0.4 0.4
sphere 0 0 0 1

popTransform
